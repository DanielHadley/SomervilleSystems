<!DOCTYPE html>
<!-- created by Daniel Hadley from twitter bootstrap -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Somerville Systems</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/keen-dashboards.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!-- Highcharts scripts -->
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script src="../js/highcharts.js"></script>

    <!-- Leaflet scripts -->
      <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
      <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
      <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
      
    <!-- Google Analytics -->

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-13225056-2', 'auto');
  ga('send', 'pageview');
	  </script>
    
</head>


<body data-spy="scroll" data-target=".bs-docs-sidebar" data-twttr-rendered="true">
    

<h1>Hello, Mayor Curtatone</h1>


<!-- The Charts are all here so that I can style them in a similar way.
They load to the specified containers -->

<script>
    $(function() {
    Highcharts.setOptions({
        colors: ["#2b908f", "#90ee7e", "#f45b5b", "#7798BF", "#aaeeee", "#ff0066", "#eeaaee",
           "#55BF3B", "#DF5353", "#7798BF", "#aaeeee"],
        chart: {
           backgroundColor: {
              linearGradient: { x1: 0, y1: 0, x2: 1, y2: 1 },
              stops: [
                 [0, '#2a2a2b'],
                 [1, '#3e3e40']
              ]
           },
           style: {
              fontFamily: "'Unica One', sans-serif"
           },
           plotBorderColor: '#606063'
        },
        title: {
           style: {
              color: '#E0E0E3',
              textTransform: 'uppercase',
              fontSize: '20px'
           }
        },
        subtitle: {
           style: {
              color: '#E0E0E3',
              textTransform: 'uppercase'
           }
        },
        xAxis: {
           gridLineColor: '#707073',
           labels: {
              style: {
                 color: '#E0E0E3'
              }
           },
           lineColor: '#707073',
           minorGridLineColor: '#505053',
           tickColor: '#707073',
           title: {
              style: {
                 color: '#A0A0A3'

              }
           }
        },
        yAxis: {
           gridLineColor: '#707073',
           labels: {
              style: {
                 color: '#E0E0E3'
              }
           },
           lineColor: '#707073',
           minorGridLineColor: '#505053',
           tickColor: '#707073',
           tickWidth: 1,
           title: {
              style: {
                 color: '#A0A0A3'
              }
           }
        },
        tooltip: {
           backgroundColor: 'rgba(0, 0, 0, 0.85)',
           style: {
              color: '#F0F0F0'
           }
        },
        plotOptions: {
           series: {
              dataLabels: {
                 color: '#B0B0B3'
              },
              marker: {
                 lineColor: '#333'
              }
           },
           boxplot: {
              fillColor: '#505053'
           },
           candlestick: {
              lineColor: 'white'
           },
           errorbar: {
              color: 'white'
           }
        },
        legend: {
           itemStyle: {
              color: '#E0E0E3'
           },
           itemHoverStyle: {
              color: '#FFF'
           },
           itemHiddenStyle: {
              color: '#606063'
           }
        },
        credits: {
           style: {
              color: '#666'
           }
        },
        labels: {
           style: {
              color: '#707073'
           }
        },

        drilldown: {
           activeAxisLabelStyle: {
              color: '#F0F0F3'
           },
           activeDataLabelStyle: {
              color: '#F0F0F3'
           }
        },

        navigation: {
           buttonOptions: {
              symbolStroke: '#DDDDDD',
              theme: {
                 fill: '#505053'
              }
           }
        },

        // scroll charts
        rangeSelector: {
           buttonTheme: {
              fill: '#505053',
              stroke: '#000000',
              style: {
                 color: '#CCC'
              },
              states: {
                 hover: {
                    fill: '#707073',
                    stroke: '#000000',
                    style: {
                       color: 'white'
                    }
                 },
                 select: {
                    fill: '#000003',
                    stroke: '#000000',
                    style: {
                       color: 'white'
                    }
                 }
              }
           },
           inputBoxBorderColor: '#505053',
           inputStyle: {
              backgroundColor: '#333',
              color: 'silver'
           },
           labelStyle: {
              color: 'silver'
           }
        },

        navigator: {
           handles: {
              backgroundColor: '#666',
              borderColor: '#AAA'
           },
           outlineColor: '#CCC',
           maskFill: 'rgba(255,255,255,0.1)',
           series: {
              color: '#7798BF',
              lineColor: '#A6C7ED'
           },
           xAxis: {
              gridLineColor: '#505053'
           }
        },

        scrollbar: {
           barBackgroundColor: '#808083',
           barBorderColor: '#808083',
           buttonArrowColor: '#CCC',
           buttonBackgroundColor: '#606063',
           buttonBorderColor: '#606063',
           rifleColor: '#FFF',
           trackBackgroundColor: '#404043',
           trackBorderColor: '#404043'
        },

        // special colors for some of the
        legendBackgroundColor: 'rgba(0, 0, 0, 0.5)',
        background2: '#505053',
        dataLabelsColor: '#B0B0B3',
        textColor: '#C0C0C0',
        contrastTextColor: '#F0F0F3',
        maskColor: 'rgba(255,255,255,0.3)'
    });

<!-- Public Safety All Crime -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'AllCrimeChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Crime in Somerville'
        },
	     subtitle: {
                text: 'Source: NIBRS & Somerville Police Department'
        },
	    
        xAxis: {
                categories: ['2008', '2009', '2010', '2011', '2012', '2013', '2014']
        },
	yAxis: {
                title: {
                    text: 'Number of Offenses'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
        },

        series: [{
	    name: 'All Offenses',
            data: [2806, 2435, 2447, 2213, 2186, 1869, 1635]
	      }, {
	    name: 'Violent Offenses',
            data: [487, 476, 433, 473, 456, 336, 393]
	      }, {
	    name: 'Property Offenses',
            data: [2341, 1970, 2028, 1758, 1752, 1551, 1253]
        }]
    });

<!-- Public Safety Violent Crime -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'ViolentCrimeChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Violent Crime'
        },
	     subtitle: {
                text: 'Source: NIBRS & Somerville Police Department'
        },
	    
        xAxis: {
                categories: ['2008', '2009', '2010', '2011', '2012', '2013', '2014']
        },
	yAxis: {
		min: 0,
                title: {
                    text: 'Number of Offenses'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
        },

        series: [{
	    name: 'Murder',
            data: [2, 3, 0, 1, 0, 0, 1]
	      }, {
	    name: 'Rape',
            data: [20, 8, 14, 17, 22, 18, 10]
	      }, {
	    name: 'Robbery',
            data: [112, 104, 79, 89, 84, 51, 58]
	      }, {
	    name: 'Aggravated Assault',
            data: [150, 167, 136, 151, 152, 111, 137]
        }]
    });
    
<!-- Public Safety Property Crime -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'PropertyCrimeChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Property Crime'
        },
	     subtitle: {
                text: 'Source: NIBRS & Somerville Police Department'
        },
	    
        xAxis: {
                categories: ['2008', '2009', '2010', '2011', '2012', '2013', '2014']
        },
	yAxis: {
                title: {
                    text: 'Number of Offenses'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
        },

        series: [{
	    name: 'Burglary',
            data: [461, 494, 514, 416, 349, 431, 192]
	      }, {
	    name: 'Theft from Motor Vehicle',
            data: [801, 490, 625, 392, 470, 323, 315]
	      }, {
	    name: 'Other Larceny',
            data: [829, 823, 711, 799, 800, 696, 634]
	      }, {
	    name: 'Theft of Motor Vehicle',
            data: [250, 163, 178, 151, 133, 101, 112]
        }]
    });
    
<!-- Property Tax -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'PropertyTaxChartContainer',
	    type: 'column'
        },
	title: {
                text: 'Property Taxes, FY2014'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	    
        xAxis: {
                categories: ['Cambridge','Brookline','Somerville','Boston','Saugus','Watertown','Malden','Medford',
			     'Winchester','Everett','Chelsea','Melrose','Belmont','Arlington','Revere','Lynn']
            },
	yAxis: {
                title: {
                    text: 'Tax on $400,000 Property with Residential Exemption ($)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
	    
	tooltip: {
            pointFormat: '<b>${point.y:,.0f}</b>'
        },
	
	legend: {
	    enabled: false
	},

        series: [{
	    name: 'Property Tax',
            data: [1545,2561,{
                y: 3156,
                color: '#263c53'},3268,4644,4706,4801,4900,5064,5187,5193,5312,5400,5516,6220,6852]
	      }]
    });

<!-- Revenue -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'RevChartContainer',
	    type: 'pie'
        },
	title: {
                text: 'Revenue, Fiscal Year 2014'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	    
	    
	tooltip: {
            pointFormat: '<b>${point.y:,.0f}</b>'
        },

        series: [{
	    name: 'Revenue',
            data: [
                ['Taxes',   123320008.4],
                ['State Aid',       46979050.8],
                ['Other',    9787302.25],
                ['Fines and Forfeits',     7829841.8],
                ['Licenses and Permits',   5872381.35],
		['Fees', 1174476.27],
		['Penalities and Interest', 978730.225],
		['Misc Recurring', 391492.09]
		]
	}]
    });
    
<!-- Expenditures -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'ExChartContainer',
	    type: 'pie'
        },
	title: {
                text: 'Expenditures, Fiscal Year 2014'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	    
	tooltip: {
            pointFormat: '<b>${point.y:,.0f}</b>'
        },

        series: [{
	    name: 'Expenditures',
            data: [
                ['School Department',   56766353],
                ['Public Safety',       37191748],
                ['Pension and Fringe',    35234288],
                ['Public Works',     23489525],
                ['General Government',   15659684],
		['State Assessments', 11744763],
		['Debt Service', 9787302],
		['Culture and Recreation', 2740445],
		['Other', 1761714],
		['Overlay Reserve', 1565968]
		]
	}]
    });



 <!-- DPW work orders -->
    var chart1 = new Highcharts.Chart({
        chart: {
        renderTo: 'AnnualWorkOrderChartContainer',
        type: 'column'
        },
    title: {
            text: 'On-Time Completion of DPW Work Orders'
        },
    subtitle: {
        text: 'Source: City of Somerville'
    },
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '%' + '</b>';
        }
        },   
        xAxis: {
        categories: ['On Time','24 Hours Late','48 Hours Late','72 Hours Late', 'More than 72 Hours Late']
        },
    yAxis: {
            title: {
                    text: 'Percent Completed'
            },
            labels: {
        format: '{value}%'
        },
        plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
            }]
        },
    plotOptions: {
        series: {
            pointWidth: 15
        }
    },
        series: [{
        name: '2008',
            data: [85.5,0.9,0.6,0.6,11.9]
        }, {
        name: '2009',
            data: [82.7,2.3,0.8,0.8,12.7]
        }, {
        name: '2010',
            data: [83.0,1.9,1.1,0.6,12.7]
        }, {
        name: '2011',
            data: [79.3,2.6,1.3,0.9,15.0]
        }, {
        name: '2012',
            data: [87.6,2.1,0.7,0.6,8.4]
        }, {
        name: '2013',
            data: [83.1,3.0,1.3,0.9,10.7]
        }, {
        name: '2014',
            data: [79.8,2.4,1.1,1.1,14.3] 
        }]
    });





<!-- DPW work orders (pie) -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'WorkOrder2ChartContainer',
	    type: 'pie'
        },
	title: {
                text: 'On-Time Completion of DPW Work Orders, 2013 (through October)'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	    
	tooltip: {
            pointFormat: '<b>{point.y:,.0f}%</b>'
        },

        series: [{
	    name: 'Work Orders',
            data: [
                ['On Time',83.3],
                ['24 Hours Late',3.1],
                ['48 Hours Late',1.4],
                ['72 Hours Late',10.4]
		]
	}]
    });

<!-- 311 calls -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: '311CallsChartContainer',
	    type: 'pie'
        },
	title: {
                text: '311 Calls, 2013 (through November)'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	    
	tooltip: {
            pointFormat: '<b>{point.y:,.0f}%</b>'
        },

        series: [{
	    name: 'Percent of 311 calls',
            data: [
                ['Answered within 20 seconds',84.74],
                ['Answered after 20 seconds/abandoned',15.26]
	    ]
	}]
    });

<!-- Happiness -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'HappyChartContainer',
	    type: 'column'
        },
	title: {
                text: 'Resident Satisfaction (Out of Ten)'
            },
	     subtitle: {
                text: 'Source: SomerStat'
            },
	    
        xAxis: {
                categories: ["Happiness", "Life Satisfaction", "City Satisfaction", "Neighborhood Satisfaction", "Civic Pride",
                    "Safety at Night", "Neighborhood Aesthetics", "Neighborhood Parks"]
            },
	yAxis: {
                title: {
                    text: 'Satisfaction'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
	    
	tooltip: {
            pointFormat: '<b>{point.y:,.1f}</b>'
        },
	
	legend: {
	    enabled: false
	},

        series: [{
	    name: 'Satisfaction',
            data: [7.84, 8.06, 8.23, 8.01, 8.19, 7.80, 7.07, 7.68]
	      }]
    });

<!-- Happiness2 -->
     var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'Happy2ChartContainer',
	    type: 'column'
        },
	title: {
                text: 'Resident Satisfaction (Out of Five)'
            },
	     subtitle: {
                text: 'Source: SomerStat'
            },
	    
        xAxis: {
                categories: ["Availability of Information about City Services", "Cost of Housing", "Overall Quality of Public Schools", "Trust in Police",
                    "Maintenance of Streets", "Availability of Community Events"]
            },
	yAxis: {
                title: {
                    text: 'Satisfaction'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
	    
	tooltip: {
            pointFormat: '<b>{point.y:,.1f}</b>'
        },
	
	legend: {
	    enabled: false
	},

        series: [{
	    name: 'Satisfaction',
            data: [4.24, 2.60, 3.26, 3.76, 3.37, 4.23]
	      }]
    });
    
<!-- This is an empty chart- a place holder if we want to use more than one chart but style them in the same way -->
    var chart2 = new Highcharts.Chart({
        chart: {
            renderTo: 'container2',
            type: 'column'
        },

        xAxis: {
            type: 'datetime'
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
            pointStart: Date.UTC(2010, 0, 1),
            pointInterval: 3600 * 1000 // one hour
        }]
    });
});
</script>

  <div class="container-fluid">

    <div class="row">
      <div class="col-sm-8">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <div id="grid-1-1">
              <div id="AllCrimeChartContainer" style="width:100%; height:400px;"></div>
            </div>
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <div id="qol-map" style="height: 400px"></div>
            <script>

              // initialize the map
              var map = L.map('qol-map', {scrollWheelZoom:false}).setView([42.3947, -71.10548], 13);

              // load a tile layer
              L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
                subdomains: 'abcd',
                maxZoom: 19
              }).addTo(map);

              // load GeoJSON from an external file: gis.stackexchange.com/questions/68489/how-to-load-external-geojson-file-into-leaflet-map

              // Function to make popup
              function onEachFeature(feature, layer) {
                    if (feature.properties && feature.properties.typeName) {
                        layer.bindPopup(feature.properties.typeName);
                    }
                }

              function filling(x) {
                return x == 'Trash/debris on sidewalk report' ? "#1aadce" :
                       x == 'Rats' ? "#8bbc22" :
                       x == 'Graffiti' ? "#900000" :
                       "#808080";
              }         

              function pointToLayer (feature, latlng) {
                  return new L.CircleMarker(latlng, {
                      radius: 8,
                      fillColor: filling(feature.properties["typeName"]),
                      color: "#000",
                      weight: 1,
                      opacity: .75,
                      fillOpacity: 0.75
                    })
                }

              $.ajax({
              dataType: "json",
              url: "../geo/QualityOfLifeCSSample.geojson",
              success: function (response) {
                    geojsonLayer = L.geoJson(response, {
                      pointToLayer: pointToLayer,
                      onEachFeature : onEachFeature
                    }).addTo(map);
                }
              }).error(function() {});

            </script>
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
<!-- end of three -->
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
    </div>
  </div>




<!-- Footer
================================================== -->
<footer class="footer">
  <div class="container">
    <p>Somerville Systems : Daniel Hadley, Emily Monea, & Skye Stewart | <a href="https://github.com/DanielHadley/SomervilleSystems">Code.</a> </p>
<p><a href="mailto:dhadley@somervillema.gov">Contact us</a> with questions, requests, and suggestions.</p>

<br>
<img src="../img/somervilleSeal.png" alt="Kippt">
       
        
        
      

</div>
    </footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>
    

  

</body></html>